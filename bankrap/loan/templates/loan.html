<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BankRap - Loans & Requests</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        /* Unified base styles from Account Management snippet */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            min-height: 100vh;
            background-color: #f9fafb; /* gray-50 */
        }
        .transition-all {
            transition: all 0.3s ease;
        }
        .hover-lift:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
        }
        .nav-link.active {
            color: #2563eb; /* blue-600 */
            background-color: #eff6ff; /* blue-50 */
            border-radius: 0.375rem; /* rounded-md */
        }

        /* Custom Styles for Loans Page Content (re-using Tailwind theme colors) */
        .main-container { max-width: 1200px; margin: 2rem auto; padding: 0 1rem; }

        .dashboard-header {
            background: #fff;
            border-radius: 0.75rem; /* rounded-xl */
            padding: 2rem;
            margin-bottom: 2rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }
        .dashboard-header h1 { color: #2563eb; margin-bottom: 0.5rem; font-size: 2.5rem; }

        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 1.5rem;
        }

        .stat-card {
            background: #fff;
            border-radius: 0.75rem; /* rounded-xl */
            padding: 1.5rem;
            text-align: center;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            transition: transform 0.3s ease;
            border: 1px solid #e5e7eb;
        }
        .stat-card:hover { transform: translateY(-3px); box-shadow: 0 6px 16px rgba(0, 0, 0, 0.1); }

        /* Stat Icon Colors (Tailwind classes applied via custom properties) */
        .stat-icon { width: 3rem; height: 3rem; display: flex; align-items: center; justify-content: center; border-radius: 9999px; margin: 0 auto 0.5rem; font-size: 1.25rem; color: white; box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1); }
        .stat-icon.pending { background-color: #f59e0b; } /* amber-500 */
        .stat-icon.approved { background-color: #10b981; } /* emerald-500 */
        .stat-icon.rejected { background-color: #ef4444; } /* red-500 */
        .stat-icon.repaid { background-color: #3b82f6; } /* blue-500 */

        .tab-navigation {
            display: flex;
            background: #fff;
            border-radius: 0.75rem;
            padding: 0.25rem;
            margin-bottom: 2rem;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
        }
        .tab-btn {
            flex: 1;
            padding: 0.75rem;
            border: none;
            background: transparent;
            border-radius: 0.5rem;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.3s ease;
            color: #4b5563; /* gray-600 */
        }
        .tab-btn.active {
            background: #2563eb;
            color: white;
            box-shadow: 0 2px 4px rgba(37, 99, 235, 0.3);
        }
        .tab-btn:hover:not(.active) { background: #eff6ff; } /* blue-50 */

        .loan-form, .card {
            background: #fff;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
            border: 1px solid #e5e7eb;
        }

        /* Card Status Badges */
        .status-badge {
            padding: 0.25rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
        }
        .status-pending { background: #fef3c7; color: #92400e; } /* amber-100/800 */
        .status-approved { background: #dbeafe; color: #1e40af; } /* blue-100/800 */
        .status-accepted { background: #d1fae5; color: #065f46; } /* emerald-100/800 */

        .cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1.5rem;
        }

        /* Form styling using existing Tailwind utility classes where possible */
        .form-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
        .form-group { margin-bottom: 1.5rem; }
        .form-control { width: 100%; padding: 0.75rem; border: 1px solid #d1d5db; border-radius: 0.5rem; font-size: 1rem; transition: border-color 0.3s ease; }
        .form-control:focus { outline: none; border-color: #2563eb; box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.2); }
        .btn-primary { background: #2563eb; color: white; padding: 0.75rem 2rem; border-radius: 0.5rem; font-weight: 600; transition: all 0.3s ease; }
        .btn-primary:hover { background: #1d4ed8; }

        /* Content Visibility */
        .content-section { display: none; }
        .content-section.active { display: block; }

        /* Fade-in Animation */
        @keyframes fadeInUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .fade-in { animation: fadeInUp 0.6s ease-out; }

        /* Responsive Navbar adjustments */
        @media (max-width: 767px) {
            .nav-links-mobile {
                display: none;
                flex-direction: column;
                padding-bottom: 1rem;
            }
            .nav-links-mobile.show {
                display: flex;
            }
            .nav-links-mobile a {
                padding: 0.5rem 1rem;
            }
            .form-row {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div id="app">
        <nav class="bg-white shadow-md sticky top-0 z-50">
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex justify-between items-center h-16">
                    <div class="flex items-center">
                        <div class="flex-shrink-0 flex items-center">
                            <div class="w-9 h-9 bg-blue-600 rounded-lg flex items-center justify-center mr-2">
                                <span class="text-white font-bold text-lg">B</span>
                            </div>
                            <span class="text-2xl font-bold">
                                Bank<span class="text-blue-600">Rap</span>
                            </span>
                        </div>
                    </div>
                    <div class="hidden md:block">
                        <div class="ml-10 flex items-baseline space-x-8">
                            <a href="/account/" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors" data-page="accounts">Accounts</a>
                            <a href="/loan/" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors active" data-page="loans">Loans</a>
                            <a href="/wallet/" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors" data-page="wallet">Wallet</a>
                            <a href="/transaction/" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors" data-page="transactions">Transactions</a>
                            <a href="/review/" class="nav-link text-gray-700 hover:text-blue-600 px-3 py-2 text-sm font-medium transition-colors" data-page="reviews">Reviews</a>
                        </div>
                    </div>
                    <div class="md:hidden">
                        <button onclick="toggleMenu()" class="inline-flex items-center justify-center p-2 rounded-md text-gray-700 hover:text-blue-600 focus:outline-none">
                            <i class="fas fa-bars text-2xl"></i>
                        </button>
                    </div>
                </div>
            </div>
            <div id="navLinks" class="nav-links-mobile md:hidden bg-white border-t">
                <a href="/account/" class="nav-link text-gray-700 hover:text-blue-600 block px-3 py-2 text-base font-medium">Accounts</a>
                <a href="/loan/" class="nav-link text-gray-700 hover:text-blue-600 block px-3 py-2 text-base font-medium active">Loans</a>
                <a href="/wallet/" class="nav-link text-gray-700 hover:text-blue-600 block px-3 py-2 text-base font-medium">Wallet</a>
                <a href="/transaction/" class="nav-link text-gray-700 hover:text-blue-600 block px-3 py-2 text-base font-medium">Transactions</a>
                <a href="/review/" class="nav-link text-gray-700 hover:text-blue-600 block px-3 py-2 text-base font-medium">Reviews</a>
            </div>
        </nav>

        <div class="main-container">
            <div class="dashboard-header fade-in">
                <h1>Loans & Requests</h1>
                <p class="text-gray-600">Manage your borrower and lender activities</p>
            </div>

            <div class="stats-container fade-in">
                <div class="stat-card">
                    <div class="stat-icon pending">‚è≥</div>
                    <div class="stat-number text-3xl text-gray-900">12</div>
                    <div class="stat-label text-gray-500">Pending Requests</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon approved">‚úÖ</div>
                    <div class="stat-number text-3xl text-gray-900">8</div>
                    <div class="stat-label text-gray-500">Approved Loans</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon rejected">‚ùå</div>
                    <div class="stat-number text-3xl text-gray-900">3</div>
                    <div class="stat-label text-gray-500">Rejected Requests</div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon repaid">üí∞</div>
                    <div class="stat-number text-3xl text-gray-900">15</div>
                    <div class="stat-label text-gray-500">Repaid Loans</div>
                </div>
            </div>

            <div class="tab-navigation fade-in">
                <button class="tab-btn active" onclick="showTab('loan-requests', this)">My Loan Requests</button>
                <button class="tab-btn" onclick="showTab('create-request', this)">Create Request</button>
                <button class="tab-btn" onclick="showTab('loan-offers', this)">Loan Offers</button>
                <button class="tab-btn" onclick="showTab('my-offers', this)">My Offers</button>
            </div>

            <div id="loan-requests" class="content-section active fade-in">
                <div class="cards-grid">
                    <div class="card">
                        <div class="flex justify-between items-center mb-4 border-b pb-3">
                            <div class="text-lg font-semibold text-gray-900">Loan Request #1001</div>
                            <span class="status-badge status-pending">Pending</span>
                        </div>
                        <div class="space-y-2 text-sm text-gray-600">
                            <div class="flex justify-between"><span>Amount:</span><span class="font-medium text-gray-800">P5,000.00</span></div>
                            <div class="flex justify-between"><span>Interest Rate:</span><span class="font-medium text-gray-800">12.5%</span></div>
                            <div class="flex justify-between"><span>Term:</span><span class="font-medium text-gray-800">6 Months</span></div>
                        </div>
                        <div class="pt-4 mt-4 border-t border-gray-100">
                            <button class="btn-primary py-2 px-4 text-sm font-semibold rounded-lg w-full">View Details & Offers</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="flex justify-between items-center mb-4 border-b pb-3">
                            <div class="text-lg font-semibold text-gray-900">Loan Request #1002</div>
                            <span class="status-badge status-approved">Approved</span>
                        </div>
                        <div class="space-y-2 text-sm text-gray-600">
                            <div class="flex justify-between"><span>Amount:</span><span class="font-medium text-gray-800">P3,500.00</span></div>
                            <div class="flex justify-between"><span>Interest Rate:</span><span class="font-medium text-gray-800">10.0%</span></div>
                            <div class="flex justify-between"><span>Lender:</span><span class="font-medium text-gray-800">John Smith</span></div>
                        </div>
                        <div class="pt-4 mt-4 border-t border-gray-100">
                            <button class="btn-primary py-2 px-4 text-sm font-semibold rounded-lg w-full bg-green-600 hover:bg-green-700">Make Payment</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="create-request" class="content-section">
                <div class="loan-form">
                    <h2 class="text-xl font-bold text-blue-600 mb-6">Create New Loan Request</h2>
                    <form>
                        <div class="form-row">
                            <div class="form-group"><label for="amount" class="block text-sm font-medium text-gray-700 mb-1">Loan Amount (P)</label><input type="number" id="amount" class="form-control" placeholder="Enter amount" step="0.01" min="0"></div>
                            <div class="form-group"><label for="interest-rate" class="block text-sm font-medium text-gray-700 mb-1">Preferred Interest Rate (%)</label><input type="number" id="interest-rate" class="form-control" placeholder="Enter rate" step="0.01" min="0"></div>
                        </div>
                        <div class="form-group"><label for="purpose" class="block text-sm font-medium text-gray-700 mb-1">Loan Purpose</label><textarea id="purpose" class="form-control" rows="4" placeholder="Describe the purpose of your loan..."></textarea></div>
                        <button type="submit" class="btn-primary">Submit Loan Request</button>
                    </form>
                </div>
            </div>

            <div id="loan-offers" class="content-section">
                <div class="cards-grid">
                    <div class="card">
                        <div class="flex justify-between items-center mb-4 border-b pb-3">
                            <div class="text-lg font-semibold text-gray-900">Offer #2001 for Request #1001</div>
                            <span class="status-badge status-pending">Pending</span>
                        </div>
                        <div class="space-y-2 text-sm text-gray-600">
                            <div class="flex justify-between"><span>Lender:</span><span class="font-medium text-gray-800">Sarah Johnson</span></div>
                            <div class="flex justify-between"><span>Offered Rate:</span><span class="font-medium text-gray-800">11.5%</span></div>
                            <div class="flex justify-between"><span>Original Request:</span><span class="font-medium text-gray-800">P5,000.00 at 12.5%</span></div>
                        </div>
                        <div class="pt-4 mt-4 border-t border-gray-100 flex gap-2">
                            <button class="btn-primary py-2 px-4 text-sm font-semibold rounded-lg flex-1 bg-green-600 hover:bg-green-700">Accept</button>
                            <button class="btn-primary py-2 px-4 text-sm font-semibold rounded-lg flex-1 bg-red-600 hover:bg-red-700">Decline</button>
                        </div>
                    </div>
                    <div class="card">
                        <div class="flex justify-between items-center mb-4 border-b pb-3">
                            <div class="text-lg font-semibold text-gray-900">Offer #2002 for Request #1002</div>
                            <span class="status-badge status-accepted">Accepted</span>
                        </div>
                        <div class="space-y-2 text-sm text-gray-600">
                            <div class="flex justify-between"><span>Lender:</span><span class="font-medium text-gray-800">Mike Davis</span></div>
                            <div class="flex justify-between"><span>Offered Rate:</span><span class="font-medium text-gray-800">10.0%</span></div>
                            <div class="flex justify-between"><span>Contract Status:</span><span class="font-medium text-gray-800">Active</span></div>
                        </div>
                        <div class="pt-4 mt-4 border-t border-gray-100">
                            <button class="btn-primary py-2 px-4 text-sm font-semibold rounded-lg w-full">View Contract</button>
                        </div>
                    </div>
                </div>
            </div>

            <div id="my-offers" class="content-section">
                <div class="cards-grid">
                    <div class="card">
                        <div class="flex justify-between items-center mb-4 border-b pb-3">
                            <div class="text-lg font-semibold text-gray-900">My Offer #3001</div>
                            <span class="status-badge status-pending">Pending</span>
                        </div>
                        <div class="space-y-2 text-sm text-gray-600">
                            <div class="flex justify-between"><span>Borrower:</span><span class="font-medium text-gray-800">Alex Wilson</span></div>
                            <div class="flex justify-between"><span>My Offer:</span><span class="font-medium text-gray-800">P1,800.00 at 15.0%</span></div>
                            <div class="flex justify-between"><span>Purpose:</span><span class="font-medium text-gray-800">Car repair</span></div>
                        </div>
                        <div class="pt-4 mt-4 border-t border-gray-100 flex gap-2">
                            <button class="btn-primary py-2 px-4 text-sm font-semibold rounded-lg flex-1">Modify</button>
                            <button class="btn-primary py-2 px-4 text-sm font-semibold rounded-lg flex-1 bg-red-600 hover:bg-red-700">Withdraw</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        function toggleMenu() {
            document.getElementById('navLinks').classList.toggle('show');
        }

        function showTab(tabName, button) {
            document.querySelectorAll('.content-section').forEach(section => {
                section.classList.remove('active');
                section.classList.remove('fade-in');
            });
            document.querySelectorAll('.tab-btn').forEach(btn => { btn.classList.remove('active'); });

            const activeSection = document.getElementById(tabName);
            activeSection.classList.add('active');
            activeSection.classList.add('fade-in');

            button.classList.add('active');
            animateCards();
        }

        function animateCards() {
            document.querySelectorAll('.card').forEach(card => card.classList.remove('fade-in'));
            const activeSection = document.querySelector('.content-section.active');
            if (activeSection) {
                activeSection.querySelectorAll('.card').forEach((card, index) => {
                    setTimeout(() => {
                        card.classList.add('fade-in');
                    }, index * 100);
                });
            }
        }

        document.addEventListener('DOMContentLoaded', function() {
            animateCards();

            const form = document.querySelector('#create-request form');
            if(form) {
                 form.addEventListener('submit', function(e) {
                    e.preventDefault();
                    alert('Loan request submitted successfully! (Mock submission)');
                    form.reset();
                });
            }
        });

    </script>
</body>
</html>